#include <plasp/pddl/expressions/At.h>

namespace plasp
{
namespace pddl
{
namespace expressions
{

////////////////////////////////////////////////////////////////////////////////////////////////////
//
// At
//
////////////////////////////////////////////////////////////////////////////////////////////////////

At::At()
:	m_argument{nullptr}
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////

void At::setArgument(const Expression *argument)
{
	m_argumentStorage = nullptr;
	m_argument = argument;
}

////////////////////////////////////////////////////////////////////////////////////////////////////

void At::setArgument(ExpressionPointer &&argument)
{
	m_argumentStorage = std::move(argument);
	m_argument = m_argumentStorage.get();
}

////////////////////////////////////////////////////////////////////////////////////////////////////

const Expression *At::argument() const
{
	return m_argument;
}

////////////////////////////////////////////////////////////////////////////////////////////////////

ExpressionPointer At::normalize()
{
	BOOST_ASSERT(m_argumentStorage);

	auto normalizedArgument = m_argumentStorage->normalize();

	// Replace argument if changed by normalization
	if (normalizedArgument)
		setArgument(std::move(normalizedArgument));

	return nullptr;
}

////////////////////////////////////////////////////////////////////////////////////////////////////

}
}
}
